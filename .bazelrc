import %workspace%/tensorflow/.tf_configure.bazelrc

# build --copt=-march=native
# build --host_copt=-march=native
# build:opt --copt=-march=native
# build:opt --host_copt=-march=native
# 
# run --config=cuda

build --action_env PYTHON_BIN_PATH="/bin/python"
build --action_env PYTHON_LIB_PATH="/usr/lib/python3.6/site-packages"
build --force_python=py3
build --host_force_python=py3
build --python_path="/bin/python"
build --define with_jemalloc=true
build:gcp --define with_gcp_support=true
build:hdfs --define with_hdfs_support=true
build:s3 --define with_s3_support=true
build:kafka --define with_kafka_support=true
build:xla --define with_xla_support=true
build:gdr --define with_gdr_support=true
build:verbs --define with_verbs_support=true
build --action_env TF_NEED_OPENCL_SYCL="0"
build --action_env TF_NEED_CUDA="1"
build --action_env CUDA_TOOLKIT_PATH="/opt/cuda"
build --action_env TF_CUDA_VERSION="9.1"
build --action_env CUDNN_INSTALL_PATH="/opt/cuda"
build --action_env TF_CUDNN_VERSION="7"
build --action_env TF_CUDA_COMPUTE_CAPABILITIES="5.2"
build --action_env TF_CUDA_CLANG="0"
build --action_env GCC_HOST_COMPILER_PATH="/usr/bin/gcc-6"

build --config=cuda
test --config=cuda
build --copt=-march=native
build --copt=-DTENSORFLOW_MONOLITHIC_BUILD
build --host_copt=-march=native
build --host_copt=-DTENSORFLOW_MONOLITHIC_BUILD

build --crosstool_top=@local_config_cuda//crosstool:toolchain
build --define=using_cuda=true --define=using_cuda_nvcc=true

build --define framework_shared_object=true

test --test_output=errors

build:asan --strip=never
build:asan --copt -fsanitize=address
build:asan --copt -DADDRESS_SANITIZER
build:asan --copt -O1
build:asan --copt -g
build:asan --copt -fno-omit-frame-pointer
build:asan --linkopt -fsanitize=address
